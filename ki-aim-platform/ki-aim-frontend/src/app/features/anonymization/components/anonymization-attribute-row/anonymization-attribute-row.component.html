<div class="d-flex flex-row mb-2 justify-content-between" [formGroup]="form">
    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label>
                Column name
            </mat-label>

            <input
                type="text"
                matInput
                [id]="formElements.name.name"
                [(ngModel)]="anonymizationRowConfiguration.name"
                [formControlName]="formElements.name.name"
            />
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label>
                Attribute Type
            </mat-label>
            <mat-select
                [id]="formElements.dataType.name"
                [formControlName]="formElements.dataType.name"
                [(ngModel)]="anonymizationRowConfiguration.dataType"
            >
                <mat-option
                    *ngFor="let type of getAllTypes().getAll()"
                    [value]="type"
                >
                    {{ type }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label>
                Attribute Scale
            </mat-label>
            <mat-select
                [id]="formElements.scale.name"
                (ngModelChange)="setIntervalConditions()"
                [formControlName]="formElements.scale.name"
            >
                <mat-option
                    *ngFor="let scale of getAllDataScales().getAll()"
                    [value]="scale"
                >
                    {{ scale }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label>
                Transformation Type
            </mat-label>
            <mat-select
                [id]="formElements.transformationType.name"
                [(ngModel)]="anonymizationRowConfiguration.attributeProtection"
                (ngModelChange)="setIntervalConditions(); updateForm()"
                [formControlName]="formElements.transformationType.name"
            >
                <mat-option
                    *ngFor="let transformation of getTransformations().getAll()"
                    [value]="transformation"
                    >{{ transformation }}
                </mat-option>
            </mat-select>
            <mat-error *ngIf="form.controls[formElements.transformationType.name].hasError('required')">
                Value must not be empty
             </mat-error>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label>
                Interval Size
            </mat-label>
            <ng-container *ngIf="!intervalIsSelect; else selectField">
                <input
                    type="number"
                    [min]="intervalMin"
                    [max]="intervalMax"
                    [step]="intervalMin"
                    [id]="formElements.interval.name"
                    [(ngModel)]="anonymizationRowConfiguration.intervalSize"
                    (ngModelChange)="updateForm()"
                    [formControlName]="formElements.interval.name"
                    matInput
                >
            </ng-container>

            <ng-template #selectField>
                <mat-select
                    [(ngModel)]="anonymizationRowConfiguration.intervalSize"
                    [id]="formElements.interval.name"
                    (ngModelChange)="updateForm()"
                    [formControlName]="formElements.interval.name"
                >
                    <mat-option
                        *ngFor="let interval of getIntervalEnumOptions().getAll()"
                        [value]="interval"
                    >
                    {{ interval }}
                    </mat-option>
                </mat-select>
            </ng-template>

            <mat-error *ngIf="form.controls[formElements.interval.name].hasError('required')">
                Value must not be empty
             </mat-error>
             <mat-error *ngIf="form.controls[formElements.interval.name].hasError('max')">
                 Value must be less than or equal to {{ this.intervalMax }}
             </mat-error>
             <mat-error *ngIf="form.controls[formElements.interval.name].hasError('min')">
                 Value must be greater than or equal to {{ this.intervalMin }}
             </mat-error>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2">
        <div class="h-100 d-flex justify-content-center align-items-center">
            <a title="Remove configuration" (click)="removeCurrentRow()">
                <mat-icon fontIcon="delete_forever"></mat-icon>
            </a>
        </div>
    </div>
</div>
