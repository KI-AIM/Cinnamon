<!-- Error -->
<app-info-card [hidden]="evaluationService.error === null" typeClass="card-failure">
    <div>{{ evaluationService.error }}</div>
</app-info-card>

<div class="mt-2">
    <button type="submit" class="me-2" mat-raised-button color="primary" [disabled]="evaluationService.disabled"
            (click)="evaluationService.start()">
        Start
    </button>

    <button type="submit" class="me-2" mat-raised-button color="primary" [disabled]="!evaluationService.disabled"
            (click)="evaluationService.cancel()">
        Cancel Algorithm
    </button>

    <button type="submit" mat-raised-button color="primary" (click)="downloadResult()">
        Download
    </button>
</div>

<div class="mb-2">
    <h2 class="me-2" style="display: inline;">Status</h2>
    <span class="status mt-2" [ngClass]="evaluationService.status.status">
        <span>{{ evaluationService.status.status.replace("_", " ") }}</span>
    </span>
</div>

<mat-accordion *ngIf="evaluationService.status.processes.length > 0">
    <mat-expansion-panel>
        <mat-expansion-panel-header>
            <mat-panel-title>Technical Evaluation</mat-panel-title>
            <mat-panel-description>
                <span class="status mt-2"
                      [ngClass]="evaluationService.status.processes[0].externalProcessStatus">
                    <span>{{ evaluationService.status.processes[0].externalProcessStatus.replace("_", " ") }}</span>
                </span>
            </mat-panel-description>
        </mat-expansion-panel-header>

        <div>
            <ng-template *ngIf="evaluationService.technicalEvaluationStatus !== null">
                {{ evaluationService.technicalEvaluationStatus }}
            </ng-template>

            <div *ngIf="evaluationService.status.processes[0].externalProcessStatus == ProcessStatus.FINISHED; else anonNoData">

                <app-data-inspection sourceProcess="TECHNICAL_EVALUATION"></app-data-inspection>


<!--                <ng-container *ngFor="let metricsGroup of getResult() | async | keyvalue">-->

<!--                    <ng-container *ngFor="let metrics of getValues(metricsGroup) | keyvalue">-->
<!--                        <mat-expansion-panel>-->
<!--                            <mat-expansion-panel-header>-->
<!--                                <mat-panel-title>-->
<!--                                    {{ metrics.key }}-->
<!--                                </mat-panel-title>-->
<!--                            </mat-expansion-panel-header>-->

<!--                            <div>-->
<!--                                <div *ngIf="isNormalTable(metrics.key)">-->
<!--                                    <table class="table">-->
<!--                                        <thead>-->
<!--                                        <th>Attribute</th>-->
<!--                                        <th>Original</th>-->
<!--                                        <th>Synthetic</th>-->
<!--                                        </thead>-->
<!--                                        <tbody>-->
<!--                                        <tr *ngFor="let attribute of getReal(metrics.value) | keyvalue">-->
<!--                                            <td>{{ attribute.key }}</td>-->
<!--                                            <td>{{ attribute.value }}</td>-->
<!--                                            <td>{{ getSyntheticAttribute(metrics.value, attribute.key) }}</td>-->
<!--                                        </tr>-->
<!--                                        </tbody>-->
<!--                                    </table>-->
<!--                                </div>-->
<!--                                <div *ngIf="metrics.key === 'density'">-->
<!--                                    No-->
<!--                                </div>-->
<!--                                <div *ngIf="metrics.key === 'frequency_count'">-->
<!--                                    &lt;!&ndash; Real and synthetic &ndash;&gt;-->
<!--                                    <div *ngFor="let dataSet of getValues(metrics) | keyvalue">-->
<!--                                        <div>-->
<!--                                            {{ dataSet.key }}-->
<!--                                        </div>-->
<!--                                        &lt;!&ndash; Attributes &ndash;&gt;-->
<!--                                        <div *ngFor="let attribute of getValues(dataSet) | keyvalue">-->
<!--                                            <div>-->
<!--                                                {{ attribute.key }}-->
<!--                                            </div>-->
<!--                                            <div>-->
<!--                                                Hellinger Distance: {{ getHellingerDistance(attribute.value) }}-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div *ngIf="metrics.key === 'kolmogorov_smirnov'">-->
<!--                                    <table class="table">-->
<!--                                        <thead>-->
<!--                                        <th>Attribute</th>-->
<!--                                        <th *ngFor="let s of getValues(metrics)[Object.keys(getValues(metrics))[0]]  | keyvalue">-->
<!--                                            {{ s.key }}-->
<!--                                        </th>-->
<!--                                        </thead>-->
<!--                                        <tbody>-->
<!--                                        <tr *ngFor="let attribute of getValues(metrics) | keyvalue">-->
<!--                                            <td>{{ attribute.key }}</td>-->
<!--                                            <td *ngFor="let s of getValues(attribute) | keyvalue">-->
<!--                                                {{ s.value }}-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                        </tbody>-->
<!--                                    </table>-->
<!--                                </div>-->

<!--                            </div>-->

<!--                        </mat-expansion-panel>-->
<!--                    </ng-container>-->
<!--                </ng-container>-->

            </div>
            <ng-template #anonNoData>
                <div>
                    No Data Available
                </div>
            </ng-template>
        </div>

    </mat-expansion-panel>
</mat-accordion>



