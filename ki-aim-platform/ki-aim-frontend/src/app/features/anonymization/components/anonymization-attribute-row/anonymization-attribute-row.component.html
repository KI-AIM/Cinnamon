<div class="d-flex flex-row mb-2 justify-content-between" [formGroup]="form">
    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label
                [style.color]="isElementValid(this.formElements.name.name) ? '' : 'red'" style="transition: color .1s linear"
            >
            Column name
            </mat-label>

            <input
                type="text"
                matInput
                [id]="'name_' + configurationRow?.index"
                [(ngModel)]="anonymizationRowConfiguration.name"
                [value]="anonymizationRowConfiguration.name"
                [formControlName]="formElements.name.name"
            />
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label
                [style.color]="isElementValid(this.formElements.dataType.name) ? '' : 'red'" style="transition: color .1s linear"
            >
                Attribute Type
            </mat-label>
            <mat-select
                [id]="'type_' + configurationRow?.index"
                (ngModelChange)="setIntervalConditions()"
                [formControlName]="formElements.dataType.name"
                [(ngModel)]="anonymizationRowConfiguration.dataType"
            >
                <mat-option
                    *ngFor="let type of getAllTypes().getAll()"
                    [value]="type"
                >
                    {{ type }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label
                [style.color]="isElementValid(this.formElements.scale.name) ? '' : 'red'" style="transition: color .1s linear"
            >
                Attribute Scale
            </mat-label>
            <mat-select
                [id]="'scale_' + configurationRow?.scale"
                [(ngModel)]="anonymizationRowConfiguration.scale"
                (ngModelChange)="setIntervalConditions()"
                [formControlName]="formElements.scale.name"
            >
                <mat-option
                    *ngFor="let scale of getAllDataScales().getAll()"
                    [value]="scale"
                >
                    {{ scale }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label
                [style.color]="isElementValid(this.formElements.transformationType.name) ? '' : 'red'" style="transition: color .1s linear"
            >
                Transformation Type
            </mat-label>
            <mat-select
                [id]="'transformation_' + configurationRow?.index"
                [(ngModel)]="anonymizationRowConfiguration.attributeProtection"
                (ngModelChange)="setIntervalConditions()"
                [formControlName]="formElements.transformationType.name"
            >
                <mat-option
                    *ngFor="let transformation of getTransformations().getAll()"
                    [value]="transformation"
                    >{{ transformation }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2 w-100">
        <mat-form-field>
            <mat-label
                [style.color]="isElementValid(this.formElements.interval.name) ? '' : 'red'" style="transition: color .1s linear"
            >
                Interval Size
            </mat-label>
            <ng-container *ngIf="!intervalIsSelect; else selectField">
                <input
                    type="number"
                    [min]="intervalMin"
                    [max]="intervalMax"
                    [step]="intervalMin"
                    [(ngModel)]="anonymizationRowConfiguration.intervalSize"
                    [formControlName]="formElements.interval.name"
                    matInput
                >
            </ng-container>

            <ng-template #selectField>
                <mat-select 
                    [(ngModel)]="anonymizationRowConfiguration.intervalSize"
                    [formControlName]="formElements.interval.name"    
                >
                    <mat-option
                        *ngFor="let interval of getIntervalEnumOptions().getAll()"
                        [value]="interval"
                    >
                    {{ interval }}
                    </mat-option>
                </mat-select>
            </ng-template>

        </mat-form-field>
    </div>

    <div class="d-flex flex-column px-2">
        <div class="h-100 d-flex justify-content-center align-items-center">
            <a title="Remove configuration" (click)="removeCurrentRow()">
                <mat-icon fontIcon="delete_forever"></mat-icon>
            </a>
        </div>
    </div>
</div>
