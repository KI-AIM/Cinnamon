<div class="vertical-boxes">

    <div class="box">
        <h3>Process Activation</h3>
        <ng-container *ngFor="let process of configurationInfo.processes;">
            <mat-checkbox color="primary" [(ngModel)]="processEnabled[process.job]">Run {{ jobLabels[process.job] }}</mat-checkbox>
        </ng-container>
    </div>

    <!-- Upload -->
    <div class="box">
        <h3>Configuration Upload</h3>
        <app-configuration-upload [configurationName]="this.algorithmService.getConfigurationName()"
                                  [disabled]="disabled || algorithms.length === 0">
        </app-configuration-upload>
    </div>

    <div [class.d-none]="!hasAlgorithmSelection" class="box">
        <h3>Algorithm Selection</h3>

        <app-configuration-selection #selection [algorithms]="algorithms" [disabled]="disabled"
                                     (change)="updateSelectCache()">
        </app-configuration-selection>
    </div>

    <div class="box">

    <h3>Algorithm Configuration</h3>

        <div *ngIf="!selection.selectedOption; else configurationForms" id="placeholder" class="w-100 mt-4">
            <div class="ms-auto me-auto" style="width: fit-content">
                Please select an algorithm
            </div>
        </div>
        <ng-template #configurationForms>
            <ng-content></ng-content>

            <div *ngFor="let item of algorithms" [id]="item">
                <ng-container *ngIf="selection.selectedOption.name === item.name">
                    <p>{{ item.description }}</p>

                    <app-configuration-form #form [algorithm]="item" [disabled]="disabled"
                                            (onChange)="onFormChange()" [additionalConfigs]="additionalConfigs">
                    </app-configuration-form>
                </ng-container>
            </div>
        </ng-template>

        <div class="mt-2">
            <button type="submit" mat-raised-button color="primary" [disabled]="disabled || (oneEnabled && !formValid)"
                    (click)="submit()">
                Continue
            </button>
        </div>

    </div>

</div>
