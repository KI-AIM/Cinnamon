<div class="d-flex flex-row w-100">

    <div class="d-flex" style="height: 56px;">
        <div class="d-flex flex-column justify-content-center">
            <mat-label [attr.for]="configurationInputDefinition.name">{{ configurationInputDefinition.label }}
            </mat-label>
        </div>
    </div>

    <span style="" [formGroup]="form">
        <ng-container [ngSwitch]="configurationInputDefinition.type">

            <ng-container *ngSwitchCase="ConfigurationInputType.ARRAY">
                <mat-form-field>
                    <input type="text" [value]="form.controls[configurationInputDefinition.name].value"
                           [id]="configurationInputDefinition.name" matInput disabled="disabled"/>
                </mat-form-field>

                <app-configuration-input-array [configurationInputDefinition]="configurationInputDefinition"
                                               [parentForm]="form">
                </app-configuration-input-array>
            </ng-container>

            <ng-container *ngSwitchCase="ConfigurationInputType.FLOAT">
                <mat-form-field>
                    <input type="number" [formControlName]="configurationInputDefinition.name"
                           [id]="configurationInputDefinition.name" matInput/>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('required')">
                       Value must not be empty
                    </mat-error>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('max')">
                        Value must be less than or equal to {{ configurationInputDefinition.maxValue }}
                    </mat-error>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('min')">
                        Value must be greater than or equal to {{ configurationInputDefinition.minValue }}
                    </mat-error>
                </mat-form-field>
            </ng-container>

            <ng-container *ngSwitchCase="ConfigurationInputType.INTEGER">
                <mat-form-field>
                    <input type="number" [formControlName]="configurationInputDefinition.name"
                           [id]="configurationInputDefinition.name"
                           (change)="form.controls[configurationInputDefinition.name].setValue(Math.round(form.controls[configurationInputDefinition.name].value));"
                           matInput/>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('required')">
                       Value must not be empty
                    </mat-error>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('max')">
                        Value must be less than or equal to {{ configurationInputDefinition.maxValue }}
                    </mat-error>
                    <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('min')">
                        Value must be greater than or equal to {{ configurationInputDefinition.minValue }}
                    </mat-error>
                </mat-form-field>
            </ng-container>

            <ng-container *ngSwitchCase="ConfigurationInputType.STRING">
                <ng-container *ngIf="configurationInputDefinition.values; else stringInput">
                    <mat-form-field>
                        <mat-select [formControlName]="configurationInputDefinition.name"
                                    [id]="configurationInputDefinition.name">
                            <mat-option *ngFor="let option of configurationInputDefinition.values" [value]="option">
                                {{ option }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </ng-container>
                <ng-template #stringInput>
                    <mat-form-field>
                        <input type="text" [formControlName]="configurationInputDefinition.name"
                               [id]="configurationInputDefinition.name"
                               (change)="form.controls[configurationInputDefinition.name].setValue(form.controls[configurationInputDefinition.name].value.trim());"
                               matInput/>
                        <mat-error *ngIf="form.controls[configurationInputDefinition.name].hasError('required')">
                            Value must not be empty
                        </mat-error>
                    </mat-form-field>
                </ng-template>
            </ng-container>
        </ng-container>
    </span>

    <div class="d-flex" style="height: 56px;">
        <div class="d-flex flex-column justify-content-center">
            <span>
                <app-configuration-input-info [configurationInputDefinition]="configurationInputDefinition">
                </app-configuration-input-info>
            </span>
        </div>
        <div class="d-flex flex-column justify-content-center">
            <span>
                <a title="Additional Settings" (click)="setToDefault()" style="vertical-align: middle;">
                    <mat-icon fontIcon="replay"></mat-icon>
                </a>
            </span>
        </div>
    </div>

</div>


